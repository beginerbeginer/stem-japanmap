{"version":3,"sources":["components/RenderLayers.js","components/Window.js","components/Leggend.js","App.js","index.js"],"names":["colorRange","renderLayers","props","cityData","prefData","onClick","GeoJsonLayer","id","data","pickable","stroked","filled","lineWidthScale","lineWidthMinPixels","getFillColor","d","properties","getLineColor","answerIndex","Window","p","object","address","KEN","SEIREI","GUN","SIKUCHOSON","filter","join","answer","style","position","padding","backgroundColor","color","fontSize","width","heigth","zIndex","top","y","left","x","react_default","a","createElement","Leggend","jsx","className","MapWrapperStyle","HeaderStyle","height","whiteSpace","overflowX","HeaderTitle","textAlign","lineHeight","FooterStyle","bottom","FooterLink","display","marginLeft","marginTop","rootElement","document","getElementById","ReactDOM","render","_useState","useState","_useState2","Object","slicedToArray","setPrefData","_useState3","_useState4","setCityData","_useState5","_useState6","detail","setDetail","useEffect","result","regenerator_default","async","_context","prev","next","awrap","json","sent","stop","fetchCityData","_context2","fetchPrefData","_useState7","window","innerWidth","innerHeight","longitude","latitude","zoom","maxZoom","pitch","bearing","_useState8","viewport","setViewport","handleResize","v","objectSpread2","addEventListener","removeEventListener","deckgl","layers","console","log","initialViewState","controller","href"],"mappings":"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","file":"static/js/main.99fb9b3f.chunk.js","sourcesContent":["import { GeoJsonLayer } from 'deck.gl';\n\nconst colorRange = [ null, [ 60, 255, 60 ], [ 60, 60, 255 ], [ 255, 255, 60 ], [ 255, 60, 60 ], [ 60, 60, 60 ] ];\n\nexport function renderLayers(props) {\n\tconst { cityData, prefData, onClick } = props;\n\n\tif (!cityData) return [];\n\n\tconst city = [\n\t\tnew GeoJsonLayer({\n\t\t\tid: 'city-layer',\n\t\t\tdata: cityData,\n\t\t\tpickable: true,\n\t\t\tstroked: true,\n\t\t\tfilled: true,\n\t\t\tlineWidthScale: 20,\n\t\t\tlineWidthMinPixels: 0.5,\n\t\t\tgetFillColor: (d) => colorRange[d.properties['answer']],\n\t\t\tgetLineColor: [ 120, 120, 120 ],\n\t\t\tonClick: onClick\n\t\t})\n\t];\n\n\tconst pref = [\n\t\tnew GeoJsonLayer({\n\t\t\tid: 'pref-layer',\n\t\t\tdata: prefData,\n\t\t\tpickable: false,\n\t\t\tstroked: true,\n\t\t\tfilled: false,\n\t\t\tlineWidthScale: 20,\n\t\t\tlineWidthMinPixels: 1.5,\n\t\t\tgetFillColor: [ 0, 0, 0 ],\n\t\t\tgetLineColor: [ 20, 20, 20 ]\n\t\t})\n\t];\n\n\treturn [ city, pref ];\n}\n","import React from 'react';\n\nconst answerIndex = [\n\tnull,\n\t'各校１人以上の教員が実施済みと把握',\n\t'各校１人以上の教員が年度末までに実施予定と把握',\n\t'一部の学校の教員が実施済み、あるいは年度末までに実施予定と把握',\n\t'行っていない、行わないと把握'\n];\n\nexport default (props) => {\n\tconst { data, onClick } = props;\n\n\tif (!data) return null;\n\n\tconst p = data.object.properties;\n\n\tconst address = [ p.KEN, p.SEIREI, p.GUN, p.SIKUCHOSON ].filter((d) => d).join('');\n\tconst answer = answerIndex[p.answer];\n\tconst style = {\n\t\tposition: 'absolute',\n\t\tpadding: '20px',\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.5)',\n\t\tcolor: 'white',\n\t\tfontSize: '12px',\n\t\twidth: '300px',\n\t\theigth: '150px',\n\t\tzIndex: '999',\n\t\ttop: data.y,\n\t\tleft: data.x\n\t};\n\n\treturn (\n\t\t<div style={style} onClick={onClick}>\n\t\t\t<h1>{address}</h1>\n\t\t\t<p>{answer}</p>\n\t\t</div>\n\t);\n};\n","import React from 'react';\n\nconst style = {\n\tposition: 'absolute',\n\tpadding: '20px',\n\tbackgroundColor: 'rgba(0, 0, 0, 0.5)',\n\tcolor: 'white',\n\tfontSize: '12px',\n\twidth: '400px',\n\theigth: '150px',\n\tzIndex: '999',\n\ttop: 60,\n\tleft: 20\n};\n\nexport default (props) => {\n\treturn (\n\t\t<div style={style}>\n\t\t\t<style jsx>\n\t\t\t\t{`\n\t\t\t\t\tul {\n\t\t\t\t\t\tpadding-left: 0.25em;\n\t\t\t\t\t}\n\t\t\t\t\tli {\n\t\t\t\t\t\tlist-style: none;\n\t\t\t\t\t}\n\t\t\t\t\tli:before {\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\twidth: 12px;\n\t\t\t\t\t\theight: 12px;\n\t\t\t\t\t\tmargin-right: 1em;\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t}\n\t\t\t\t\tli.l1:before {\n\t\t\t\t\t\tbackground-color: rgb(60, 255, 60);\n\t\t\t\t\t}\n\t\t\t\t\tli.l2:before {\n\t\t\t\t\t\tbackground-color: rgb(60, 60, 255);\n\t\t\t\t\t}\n\t\t\t\t\tli.l3:before {\n\t\t\t\t\t\tbackground-color: rgb(255, 255, 60);\n\t\t\t\t\t}\n\t\t\t\t\tli.l4:before {\n\t\t\t\t\t\tbackground-color: rgb(255, 60, 60);\n\t\t\t\t\t}\n\t\t\t\t\tli.l5:before {\n\t\t\t\t\t\tbackground-color: rgb(60, 60, 60);\n\t\t\t\t\t}\n\t\t\t\t`}\n\t\t\t</style>\n\t\t\t<h3>問１～３を合わせた場合の、プログラミング教育に関する実践的な研修、または、授業の実践や模擬授業の実施状況・予定</h3>\n\t\t\t<ul>\n\t\t\t\t<li className=\"l1\">各校１人以上の教員が実施済みと把握</li>\n\t\t\t\t<li className=\"l2\">各校１人以上の教員が年度末までに実施予定と把握</li>\n\t\t\t\t<li className=\"l3\">一部の学校の教員が実施済み、あるいは年度末までに実施予定と把握</li>\n\t\t\t\t<li className=\"l4\">行っていない、行わないと把握</li>\n\t\t\t\t<li className=\"l5\">データなし</li>\n\t\t\t</ul>\n\t\t</div>\n\t);\n};\n","import React, { useEffect, useState } from 'react';\nimport DeckGL from 'deck.gl';\nimport { renderLayers } from './components/RenderLayers';\nimport Window from './components/Window.js';\nimport Leggend from './components/Leggend.js';\n\nimport { json } from 'd3-fetch';\n\nconst CITYDATA_URL = './data/city.geojson';\nconst PREFDATA_URL = './data/pref.geojson';\n\nconst MapWrapperStyle = {\n\tbackgroundColor: '#444'\n};\n\nconst HeaderStyle = {\n\tposition: 'absolute',\n\ttop: '0',\n\tzIndex: '9',\n\twidth: '100%',\n\theight: '40px',\n\twhiteSpace: 'nowrap',\n\toverflowX: 'auto',\n\tbackgroundColor: '#000'\n};\nconst HeaderTitle = {\n\tcolor: 'white',\n\ttextAlign: 'center',\n\tfontSize: '28px',\n\tlineHeight: 0\n};\n\nconst FooterStyle = {\n\tposition: 'absolute',\n\tbottom: '0',\n\tzIndex: '9',\n\twidth: '100%',\n\theight: '40px',\n\twhiteSpace: 'nowrap',\n\toverflowX: 'auto',\n\tbackgroundColor: '#000'\n};\n\nconst FooterLink = {\n\tcolor: 'white',\n\tdisplay: 'inline-block',\n\tmarginLeft: '1em',\n\tmarginTop: '16px',\n\tfontSize: '20px',\n\tlineHeight: 0\n};\n\nexport default () => {\n\tconst [ prefData, setPrefData ] = useState(null);\n\tconst [ cityData, setCityData ] = useState(null);\n\tconst [ detail, setDetail ] = useState();\n\n\tuseEffect(() => {\n\t\tconst fetchCityData = async () => {\n\t\t\tconst result = await json(CITYDATA_URL);\n\t\t\tsetCityData(result);\n\t\t};\n\t\tconst fetchPrefData = async () => {\n\t\t\tconst result = await json(PREFDATA_URL);\n\t\t\tsetPrefData(result);\n\t\t};\n\n\t\tfetchCityData();\n\t\tfetchPrefData();\n\t}, []);\n\n\tconst [ viewport, setViewport ] = useState({\n\t\twidth: window.innerWidth,\n\t\theight: window.innerHeight,\n\t\tlongitude: 136.8624917,\n\t\tlatitude: 36.0880768,\n\t\tzoom: 6,\n\t\tmaxZoom: 16,\n\t\tpitch: 0,\n\t\tbearing: 0\n\t});\n\n\t//resize\n\tuseEffect(() => {\n\t\tconst handleResize = () => {\n\t\t\tsetViewport((v) => {\n\t\t\t\treturn {\n\t\t\t\t\t...v,\n\t\t\t\t\twidth: window.innerWidth,\n\t\t\t\t\theight: window.innerHeight\n\t\t\t\t};\n\t\t\t});\n\t\t};\n\t\thandleResize();\n\t\twindow.addEventListener('resize', handleResize);\n\t\treturn () => window.removeEventListener('resize', handleResize);\n\t}, []);\n\n\tconst onClick = (d) => {\n\t\tconsole.log('click', d.object.properties);\n\t\tsetDetail(d);\n\t};\n\tconst windowClick = () => {\n\t\tsetDetail(null);\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<div style={HeaderStyle}>\n\t\t\t\t<h1 style={HeaderTitle}>市町村教育委員会における小学校プログラミング教育に関する取組状況等調査</h1>\n\t\t\t</div>\n\t\t\t<Leggend />\n\t\t\t<DeckGL\n\t\t\t\tstyle={MapWrapperStyle}\n\t\t\t\tlayers={renderLayers({\n\t\t\t\t\tcityData: cityData,\n\t\t\t\t\tprefData: prefData,\n\t\t\t\t\tonClick: onClick\n\t\t\t\t})}\n\t\t\t\tinitialViewState={viewport}\n\t\t\t\tcontroller={true}\n\t\t\t/>\n\t\t\t<Window data={detail} onClick={windowClick} />\n\t\t\t<div style={FooterStyle}>\n\t\t\t\t<a style={FooterLink} href=\"https://shimz.me/blog\">\n\t\t\t\t\tAbout\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport './styles.css';\n\nconst rootElement = document.getElementById('root');\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}